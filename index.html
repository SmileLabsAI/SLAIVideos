<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SLAI VIDEOS</title>
  <link rel="stylesheet" href="style.css">
  <!-- SDK do Mercado Pago -->
  <script src="https://sdk.mercadopago.com/js/v2"></script>
</head>
<body>
  <header>
    <h1>SLAI VIDEOS</h1>
    <p>Venda de pacotes de vídeos educativos odontológicos</p>
  </header>

  <main>
    <section class="product">
      <h3>Pack de 5 Vídeos</h3>
      <p>R$ 100,00</p>
      <button id="checkout-button-5">Comprar</button>
    </section>

    <section class="product">
      <h3>Pack de 10 Vídeos</h3>
      <p>R$ 180,00</p>
      <button id="checkout-button-10">Comprar</button>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 SLAI VIDEOS. Todos os direitos reservados.</p>
  </footer>

  <script>
    // Inicializa o Mercado Pago com sua Public Key
    const mp = new MercadoPago('APP_USR-7a366cc9-b73c-409f-a12a-c4f978c4b569');

    // Função para criar a preferência de pagamento
    async function createPreference(pack) {
      try {
        const response = await fetch('https://smilelabsai.github.io/slaivideos-backend/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ pack: pack }),
        });

        const preference = await response.json();
        return preference.id;
      } catch (error) {
        console.error('Erro ao criar a preferência:', error);
      }
    }

    // Função para iniciar o checkout
    async function startCheckout(pack) {
      const preferenceId = await createPreference(pack);

      if (preferenceId) {
        mp.checkout({
          preference: {
            id: preferenceId,
          },
        });
      }
    }

    // Adiciona eventos aos botões de compra
    document.getElementById('checkout-button-5').addEventListener('click', () => {
      startCheckout('pack5');
    });

    document.getElementById('checkout-button-10').addEventListener('click', () => {
      startCheckout('pack10');
    });
  </script>
</body>
</html>
